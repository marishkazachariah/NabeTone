{"version":3,"sources":["pages/HomePage.js","components/Navbar.js","services/auth.js","pages/Signup.js","pages/Login.js","components/AudioFileCard.js","pages/AudioFilesPage.js","api/service.js","components/AddAudioFile.js","components/ProtectedRoute.js","pages/AudioDetailsPage.js","pages/UserAudioFilesPage.js","pages/MapboxPage.js","pages/EditAudioFilePage.js","App.js","reportWebVitals.js","index.js"],"names":["HomePage","className","Navbar","props","handleLogout","axios","delete","then","response","data","catch","err","setUser","id","user","to","onClick","Signup","useState","username","setUsername","password","setPassword","message","setMessage","style","backgroundColor","borderRadius","src","alt","letterSpacing","onSubmit","e","preventDefault","post","signup","console","log","history","push","htmlFor","type","name","value","onChange","target","color","Login","login","AudioFileCard","title","_id","AudioFilesPage","audioFiles","setAudioFiles","useEffect","get","map","audioFile","service","create","baseURL","withCredentials","errorHandler","handleUpload","file","res","saveNewAudioFile","newAudioFile","deleteAudioFile","audioFileId","AddAudioFile","setTitle","audioPath","setAudioPath","location","setLocation","placeholder","uploadData","FormData","append","files","secure_url","controls","ProtectedRoute","Component","component","path","redirectPath","rest","exact","render","AudioDetailsPage","setAudioFile","match","params","author","UserAudioFilesPage","searchAudioFile","setSearchAudioFile","searchAudioFileLocation","setSearchAudioFileLocation","filteredAudioFiles","filter","toLowerCase","includes","class","marginTop","length","mapboxgl","accessToken","geocoder","require","mbxGeocoding","MapboxPage","locationLng","locationLat","coord","audioId","audioTitle","mapContainer","useRef","zoom","coordinates","audioFileLocations","setAudioFileLocations","getAudioFileLocations","i","forwardGeocode","query","send","audioLocales","body","features","center","audioIdString","Marker","Popup","closeButton","closeOnClick","closeOnMove","maxWidth","setHTML","setLngLat","addTo","current","addMarker","Map","container","geolocate","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","addControl","flyTo","ref","on","EditAudioFilePage","initTitle","setInitTitle","requestBody","put","App","addUser","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","document","getElementById"],"mappings":"gOAEe,SAASA,IACtB,OACE,sBAAKC,UAAU,iBAAf,UACE,qDACA,uOAIE,uBAJF,iS,2BCFS,SAASC,EAAOC,GAC7B,IAAMC,EAAe,WCkBZC,IAAMC,OAAO,oBACnBC,MAAK,SAAAC,GACF,OAAOA,EAASC,QAEnBC,OAAM,SAAAC,GACH,OAAOA,EAAIH,SAASC,QDtBfF,MAAK,WACZJ,EAAMS,QAAQ,UAIlB,OACE,mCACE,qBAAKX,UAAU,yDAAf,SACA,qBAAKA,UAAU,kBAAf,SACA,qBAAKA,UAAU,2BAA2BY,GAAG,YAA7C,SACE,qBAAIZ,UAAU,aAAd,UACGE,EAAMW,KACL,qCACE,cAAC,IAAD,CAAMC,GAAG,YAAYd,UAAU,WAA/B,SACE,oBAAIA,UAAU,WAAd,wBAKF,cAAC,IAAD,CAAMc,GAAG,aAAad,UAAU,WAAhC,SACE,oBAAIA,UAAU,WAAd,wBAEF,cAAC,IAAD,CAAMc,GAAG,IAAIC,QAAS,kBAAMZ,KAAgBH,UAAU,WAAtD,SACE,oBAAIA,UAAU,WAAd,yBAIJ,qCACE,cAAC,IAAD,CAAMc,GAAG,IAAId,UAAU,kBAAvB,SACE,oBAAIA,UAAU,WAAd,oBAEF,cAAC,IAAD,CAAMc,GAAG,UAAUd,UAAU,WAA7B,SACE,oBAAIA,UAAU,WAAd,sBAEF,cAAC,IAAD,CAAMc,GAAG,SAASd,UAAU,WAA5B,SACE,oBAAIA,UAAU,WAAd,wBAIN,cAAC,IAAD,CAAMc,GAAG,OAAOd,UAAU,WAA1B,SACE,oBAAIA,UAAU,WAAd,2CE1CG,SAASgB,EAAOd,GAC7B,MAAgCe,mBAAS,IAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAgCF,mBAAS,IAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KACA,EAA8BJ,mBAAS,IAAvC,mBAAOK,EAAP,KAAgBC,EAAhB,KAuBA,OACE,mCACE,yBAASvB,UAAU,SAASwB,MAAO,CAAEC,gBAAiB,WAAtD,SACE,qBAAKzB,UAAU,uBAAf,SACE,qBAAKA,UAAU,6DAAf,SACE,qBAAKA,UAAU,iBAAf,SACE,qBAAKA,UAAU,OAAOwB,MAAO,CAAEE,aAAc,QAA7C,SACE,sBAAK1B,UAAU,UAAf,UACE,qBAAKA,UAAU,sCAAf,SACE,qBACE2B,IAAI,iKACJC,IAAI,aACJ5B,UAAU,YACVwB,MAAO,CAAEE,aAAc,qBAG3B,qBAAK1B,UAAU,8CAAf,SACE,sBAAKA,UAAU,kCAAf,UACE,oBAAIA,UAAU,sBAAsBwB,MAAO,CAAEK,cAAe,OAA5D,oBACA,uBAAMC,SAxCL,SAACC,GACpBA,EAAEC,iBDRS,SAACd,EAAUE,GACtB,OAAOhB,IAAM6B,KAAK,mBAAoB,CAACf,WAAUE,aAChDd,MAAK,SAAAC,GACF,OAAOA,EAASC,QAEnBC,OAAM,SAAAC,GACH,OAAOA,EAAIH,SAASC,QCGxB0B,CAAOhB,EAAUE,GACdd,MAAK,SAACC,GACL4B,QAAQC,IAAI7B,GACRA,EAASe,SAEXH,EAAY,IACZE,EAAY,IAEZE,EAAWhB,EAASe,WAIpBpB,EAAMS,QAAQJ,GACdL,EAAMmC,QAAQC,KAAK,YAGtB7B,OAAM,SAACC,GAAD,OAASyB,QAAQC,IAAI1B,OAsBZ,UACA,sBAAKV,UAAU,oBAAf,UACE,uBAAOuC,QAAQ,WAAWvC,UAAU,aAApC,wBACA,uBACEwC,KAAK,OACLC,KAAK,WACLzC,UAAU,+BACV0C,MAAOxB,EACPyB,SAAU,SAACZ,GAAD,OAAOZ,EAAYY,EAAEa,OAAOF,aAGxC,sBAAK1C,UAAU,oBAAf,UACA,uBAAOuC,QAAQ,WAAWvC,UAAU,aAApC,wBACA,uBACEwC,KAAK,WACLC,KAAK,WACLzC,UAAU,+BACV0C,MAAOtB,EACPuB,SAAU,SAACZ,GAAD,OAAOV,EAAYU,EAAEa,OAAOF,aAGxC,wBAAQF,KAAK,SAASxC,UAAU,gCAAhC,qBACA,uBACCsB,GAAW,mBACRtB,UAAU,eACVwB,MAAO,CAAEqB,MAAO,WAFR,SAGRvB,2BCtEb,SAASwB,EAAM5C,GAC5B,MAAgCe,mBAAS,IAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAgCF,mBAAS,IAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KACA,EAA8BJ,mBAAS,IAAvC,mBAAOK,EAAP,KAAgBC,EAAhB,KAyBA,OACE,mCACE,yBAASvB,UAAU,SAASwB,MAAO,CAAEC,gBAAiB,WAAtD,SACE,qBAAKzB,UAAU,uBAAf,SACE,qBAAKA,UAAU,6DAAf,SACE,qBAAKA,UAAU,iBAAf,SACE,qBAAKA,UAAU,OAAOwB,MAAO,CAAEE,aAAc,QAA7C,SACE,sBAAK1B,UAAU,UAAf,UACE,qBAAKA,UAAU,sCAAf,SACE,qBACE2B,IAAI,gKACJC,IAAI,aACJ5B,UAAU,YACVwB,MAAO,CAAEE,aAAc,qBAG3B,qBAAK1B,UAAU,8CAAf,SACE,sBAAKA,UAAU,kCAAf,UACE,oBACEA,UAAU,sBACVwB,MAAO,CAAEK,cAAe,OAF1B,mBAMA,uBAAMC,SA/CL,SAACC,GACpBA,EAAEC,iBFCQ,SAACd,EAAUE,GACrB,OAAOhB,IAAM6B,KAAK,kBAAmB,CAACf,WAAUE,aAC/Cd,MAAK,SAAAC,GACF,OAAOA,EAASC,QAEnBC,OAAM,SAAAC,GACH,OAAOA,EAAIH,SAASC,QEJxBuC,CAAM7B,EAAUE,GACbd,MAAK,SAACC,GACL4B,QAAQC,IAAI7B,GACRA,EAASe,SAEXH,EAAY,IACZE,EAAY,IAEZE,EAAWhB,EAASe,WAIpBpB,EAAMS,QAAQJ,GACdL,EAAMmC,QAAQC,KAAK,YAGtB7B,OAAM,SAACC,GAAD,OAASyB,QAAQC,IAAI1B,OA2BZ,UACE,sBAAKV,UAAU,oBAAf,UACE,wBAAOuC,QAAQ,WAAWvC,UAAU,aAApC,sBACY,OAEZ,uBACEwC,KAAK,OACLC,KAAK,WACLzC,UAAU,+BACV0C,MAAOxB,EACPyB,SAAU,SAACZ,GAAD,OAAOZ,EAAYY,EAAEa,OAAOF,aAG1C,sBAAK1C,UAAU,oBAAf,UACE,wBAAOuC,QAAQ,WAAWvC,UAAU,aAApC,sBACY,OAEZ,uBACEwC,KAAK,WACLC,KAAK,WACLzC,UAAU,+BACV0C,MAAOtB,EACPuB,SAAU,SAACZ,GAAD,OAAOV,EAAYU,EAAEa,OAAOF,aAG1C,qBAAK1C,UAAU,YAAf,SACE,wBACEwC,KAAK,SACLxC,UAAU,gCAFZ,sBAODsB,GACC,mBACEtB,UAAU,eACVwB,MAAO,CAAEqB,MAAO,WAFlB,SAIGvB,2BC7Fd,SAAS0B,EAAT,GAAwC,IAAfC,EAAc,EAAdA,MAAOC,EAAO,EAAPA,IAC9C,OACC,mCACM,oBAAIlD,UAAU,8BAAd,SAEL,cAAC,IAAD,CAAMc,GAAE,iBAAYoC,GAAOlD,UAAU,aAArC,SACC,6BAAKiD,UCFM,SAASE,IAIvB,MAAoClC,mBAAS,IAA7C,mBAAOmC,EAAP,KAAmBC,EAAnB,KAgBA,OAJAC,qBAAU,WARTlD,IAAMmD,IAAI,mBACRjD,MAAK,SAAAC,GACL4B,QAAQC,IAAI7B,EAASC,MACrB6C,EAAc9C,EAASC,SAEvBC,OAAM,SAAAC,GAAG,OAAIyB,QAAQC,IAAI1B,QAKzB,IAGF,gCACC,+CACC0C,EAAWI,KAAI,SAAAC,GAAS,OAAI,cAACT,EAAD,eAAuCS,GAAnBA,EAAUP,WC3B9D,IAAMQ,EAAUtD,IAAMuD,OAAO,CAE3BC,QAAS,OAETC,iBAAiB,IAGbC,EAAe,SAACpD,GACpB,MAAMA,GA8BOF,EAPF,CACTkD,UACAK,aAtBiB,SAACC,GACpB,OAAON,EACJzB,KAAK,qBAAsB+B,GAC3B1D,MAAK,SAAC2D,GAAD,OAASA,EAAIzD,QAClBC,MAAMqD,IAmBPI,iBAhBqB,SAACC,GACxB,OAAOT,EACJzB,KAAK,wBAAyBkC,GAC9B7D,MAAK,SAAC2D,GAAD,OAASA,EAAIzD,QAClBC,MAAMqD,IAaPM,gBAVoB,SAACC,GACrB,OAAOX,EAAQrD,OAAR,sBAA8BgE,IACpC/D,MAAK,SAAC2D,GAAD,OAASA,EAAIzD,QAClBC,MAAMqD,KC1BI,SAASQ,EAAapE,GACnC,MAA0Be,mBAAS,IAAnC,mBAAOgC,EAAP,KAAcsB,EAAd,KACA,EAAkCtD,mBAAS,IAA3C,mBAAOuD,EAAP,KAAkBC,EAAlB,KACA,EAAgCxD,mBAAS,IAAzC,mBAAOyD,EAAP,KAAiBC,EAAjB,KAwBA,OACE,yBAAS3E,UAAU,SAAUwB,MAAO,CAAEC,gBAAiB,WAAvD,SACA,qBAAKzB,UAAU,uBAAf,SACA,qBAAKA,UAAU,6DAAf,SACA,qBAAKA,UAAU,oCAAf,SACA,qBAAKA,UAAU,0BAA0BwB,MAAO,CAACE,aAAc,QAA/D,SACA,qBAAK1B,UAAU,4BAAf,SACA,sBAAKA,UAAU,uBAAf,UACE,oBAAIA,UAAU,eAAd,8BACA,uBAAM8B,SApBW,SAACC,GACpBA,EAAEC,iBACF0B,EACGQ,iBAAiB,CAAEjB,QAAOuB,YAAWE,aACrCpE,MAAK,SAAC2D,GACL9B,QAAQC,IAAI,yBAA0B6B,GACtC/D,EAAMmC,QAAQC,KAAK,gBAEpB7B,OAAM,SAACC,GAAD,OAASyB,QAAQC,IAAI,0CAA2C1B,OAYvE,UACA,qBAAKV,UAAU,+BAAf,SACE,wBAAOuC,QAAQ,QAAQvC,UAAU,aAAjC,kBAEI,uBAAOwC,KAAK,OAAO5B,GAAG,QAAQZ,UAAU,+BAA+B4E,YAAY,wBAAqBnC,KAAK,QAAQC,MAAOO,EAAON,SAAU,SAAAZ,GAAC,OAAIwC,EAASxC,EAAEa,OAAOF,eAGxK,qBAAK1C,UAAU,+BAAf,SACA,wBAAOuC,QAAQ,WAAWvC,UAAU,aAApC,qBAEI,mBAAGA,UAAU,gBAAb,SAA6B,+GAC7B,uBAAOwC,KAAK,OAAO5B,GAAG,WAAWZ,UAAU,+BAA+B4E,YAAY,0BAAuBnC,KAAK,WAAWC,MAAOgC,EAAU/B,SAAU,SAAAZ,GAAC,OAAI4C,EAAY5C,EAAEa,OAAOF,eAGtL,qBAAK1C,UAAU,+BAAf,SACA,wBAAOuC,QAAQ,OAAOvC,UAAU,aAAhC,UACA,uBAAOwC,KAAK,OAAOxC,UAAU,eAAe2C,SA/CzB,SAACZ,GACxB,IAAM8C,EAAa,IAAIC,SACvBD,EAAWE,OAAO,YAAahD,EAAEa,OAAOoC,MAAM,IAC9CtB,EACGK,aAAac,GACbvE,MAAK,SAACC,GACLkE,EAAalE,EAAS0E,eAEvBxE,OAAM,SAACC,GAAD,OAASyB,QAAQC,IAAI,mCAAoC1B,SAwC7D8D,GAAa,uBAAO7C,IAAK6C,EAAWU,UAAQ,SAG7C,wBAAQ1C,KAAK,SAAUxC,UAAU,oCAAjC,gD,yDCpCOmF,EApBQ,SAAC,GAMjB,IALKC,EAKN,EALLC,UACAxE,EAIK,EAJLA,KACAyE,EAGK,EAHLA,KAGK,IAFLC,oBAEK,MAFU,IAEV,EADFC,EACE,iBACL,OACC,cAAC,IAAD,CACCC,OAAK,EAACH,KAAMA,EACZI,OAAQ,SAAAxF,GACP,OAAOW,EACN,cAACuE,EAAD,uCAAelF,GAAWsF,GAA1B,IAAgC3E,KAAMA,KAEtC,cAAC,IAAD,CAAUC,GAAIyE,QCZJ,SAASI,EAAiBzF,GAGxC,MAAkCe,mBAAS,MAA3C,mBAAOwC,EAAP,KAAkBmC,EAAlB,KACG,EAAwB3E,mBAAS,MAAjC,mBAAOJ,EAAP,KAAaF,EAAb,KACG0D,EAAcnE,EAAM2F,MAAMC,OAAOlF,GAmBvC0C,qBAAU,WAhBTlD,IAAMmD,IAAN,0BAA6Bc,IAC3B/D,MAAK,SAAAC,GACO4B,QAAQC,IAAI7B,EAASC,MACjCoF,EAAarF,EAASC,SAEtBC,OAAM,SAAAC,GAAG,OAAIyB,QAAQC,IAAI1B,MAIrBN,IAAMmD,IAAI,sBACTjD,MAAK,SAAAO,GAEFF,EAAQE,EAAKL,WAOrB,IAsBA,OACI,8BACKiD,GACG,mCACC5C,GACb,qCACC,6BAAK4C,EAAUR,QACA,8BACI,uBAAOtB,IAAK8B,EAAUe,UAAWU,UAAQ,MAG3CrE,EAAKqC,MAAQO,EAAUsC,OAAU,yBAAQhF,QAAS,kBArB3CH,EAqBiE6C,EAAUP,IApBzFQ,EACNU,gBAAgBxD,GAChBN,MAAK,SAAAC,GACF4B,QAAQC,IAAI,eAAgB7B,GAC5BL,EAAMmC,QAAQC,KAAK,gBAEtB7B,OAAM,SAAAC,GAAG,OAAIyB,QAAQC,IAAI1B,MAPN,IAACE,GAqB0B,oBAA+D6C,EAAUR,SAAoB,6BAC9HpC,EAAKqC,MAAQO,EAAUsC,OAAU,cAAC,IAAD,CAAMjF,GAAE,sBAAiB2C,EAAUP,KAAnC,SAA0C,2CAAcO,EAAUR,WAA0B,oCC7DpI,SAAS+C,EAAmB9F,GACzC,MAAoCe,mBAAS,IAA7C,mBAAOmC,EAAP,KAAmBC,EAAnB,KACA,EAA8CpC,mBAAS,IAAvD,mBAAOgF,EAAP,KAAwBC,EAAxB,KACA,EAA8DjF,mBAAS,IAAvE,mBAAOkF,EAAP,KAAgCC,EAAhC,KAWA9C,qBAAU,WARRlD,IACGmD,IADH,oCACoCrD,EAAMW,KAAKqC,MAC5C5C,MAAK,SAACO,GACLwC,EAAcxC,EAAKL,SAEpBC,OAAM,SAACC,GAAD,OAASyB,QAAQC,IAAI1B,QAK7B,IAEH,IAUM2F,EAAqBjD,EAAWkD,QAAO,SAAA7C,GAC3C,QAAUwC,GAAwB,UAAGxC,EAAUR,OAAQsD,cAAcC,SAASP,OACpEE,GAAgC,UAAG1C,EAAUiB,UAAW6B,cAAcC,SAASL,OAG3F,OACE,gCACE,qCAAQjG,EAAMW,KAAKK,SAAnB,2BACA,8BACA,qBAAKuF,MAAM,YAAYjF,MAAO,CAACkF,UAAU,MAAzC,SACA,qBAAKD,MAAM,2BAAX,SACI,iCACA,8BACA,sBAAKzG,UAAU,sBAAf,UACE,uBAAOuC,QAAQ,aAAf,wCACA,uBAAOC,KAAK,SAASC,KAAK,aAAa7B,GAAG,aAAagE,YAAY,mBAAmBlC,MAAOuD,EAAiBtD,SAzBtF,SAACZ,GACjCA,EAAEC,iBACFkE,EAAmBnE,EAAEa,OAAOF,eA0BpB,sBAAK1C,UAAU,sBAAf,UACI,uBAAOuC,QAAQ,gBAAf,gCACA,wGACA,uBAAOC,KAAK,SAASC,KAAK,gBAAgB7B,GAAG,gBAAgBgE,YAAY,SAASlC,MAAOyD,EAAyBxD,SA1B1F,SAACZ,GACrCA,EAAEC,iBACFoE,EAA2BrE,EAAEa,OAAOF,sBA+BH,IAA9B2D,EAAmBM,OAClBN,EAAmB7C,KAAI,SAACC,GAAD,OACnB,oBAAIzD,UAAU,aAAd,SACA,oBAAIA,UAAU,kBAAd,SAAgC,cAACgD,EAAD,eAAuCS,GAAnBA,EAAUP,YAGhE,yDAA2B,cAAC,IAAD,CAAMpC,GAAG,aAAT,mC,qBC/DrC8F,IAASC,YACP,gGAEF,IACMC,EADeC,EAAQ,GACZC,CAAa,CAAEH,YAAaD,IAASC,cAEvC,SAASI,EAAW/G,GAEjC,IAOIgH,EACAC,EACAC,EAGAC,EACAC,EACA9C,EAdE+C,EAAeC,iBAAO,MACtBhE,EAAMgE,iBAAO,MACnB,EAAwBvG,mBAAS,IAAjC,mBAAOwG,EAAP,KAGA,GAHA,KAGgCxG,mBAAS,KAAzC,mBAAOyD,EAAP,KAAiBC,EAAjB,KACA,EAAsC1D,mBAAS,CAAC,QAAS,UAAzD,mBAAOyG,EAAP,KAKA,GALA,KAKoDzG,mBAAS,KAA7D,mBAAO0G,EAAP,KAA2BC,EAA3B,KAmBMC,EAAwB,WAC5B,IADmC,IAAD,WACzBC,GACPhB,EACGiB,eAAe,CACdC,MAAOL,EAAmBG,GAAGpD,WAE9BuD,OAEA3H,MAAK,SAACC,GAEL,IAAM2H,EAAe3H,EAAS4H,KAAKC,SAAS,GAG5ChB,EAAQ,CAACc,EAAaG,OAAO,GAAIH,EAAaG,OAAO,IACrDhB,EAAUM,EAAmBG,GAAG5E,IAChCoE,EAAaK,EAAmBG,GAAG7E,MACnCuB,EAAYmD,EAAmBG,GAAGtD,UAsC1C,SAAmB4C,EAAOxG,EAAI0G,EAAY9C,GACxC,IAAM8D,EAAa,iBAAa1H,GAChC,IAAIgG,IAAS2B,OAAO,CAClB1F,MAAO,QAET,IAAI+D,IAAS4B,MAAM,CACjBC,aAAa,EACbC,cAAc,EACdC,aAAa,EACbC,SAAU,SAETC,QANH,uBAQoBP,EARpB,YAQqChB,EARrC,qCAQ4E9C,EAR5E,uBAUGsE,UAAU1B,GACV2B,MAAMvF,EAAIwF,SArDPC,CAAU7B,EAAOC,EAASC,EAAY9C,OAhBnCsD,EAAI,EAAGA,EAAIH,EAAmBhB,OAAQmB,IAAM,EAA5CA,IAqBXxE,qBAAU,WAGR,GAnCAlD,IACGmD,IADH,mBAEGjD,MAAM,SAACC,GAENqH,EAAsBrH,EAASC,SAEhCC,OAAM,SAACC,GAAD,OAASyB,QAAQC,IAAI1B,OA6B1B8C,EAAIwF,QAAR,CACAxF,EAAIwF,QAAU,IAAIpC,IAASsC,IAAI,CAC7BC,UAAW5B,EAAayB,QACxBxH,MAAO,uDACP6G,OAAQ,CAACX,EAAY,GAAIA,EAAY,IACrCD,KAAMA,IAIR,IAAM2B,EAAY,IAAIxC,IAASyC,iBAAiB,CAC9CC,gBAAiB,CACfC,oBAAoB,GAGtBC,mBAAmB,IAErBhG,EAAIwF,QAAQS,WAAWL,MACtB,IAoDH,OAAIzB,EAIF,mCACA,sBAAK3H,UAAU,YAAf,UACA,qBAAKA,UAAU,cAAf,SACI,8BACE,uBAAM8B,SAxBO,SAACC,GACpBA,EAAEC,iBACF6F,IAEAf,EACGiB,eAAe,CACdC,MAAOtD,IAERuD,OACA3H,MAAK,SAAUC,GAEd2G,EAAc3G,EAAS4H,KAAKC,SAAS,GAAGC,OAAO,GAC/ClB,EAAc5G,EAAS4H,KAAKC,SAAS,GAAGC,OAAO,GAC/C7E,EAAIwF,QAAQU,MAAM,CAAErB,OAAQ,CAACnB,EAAaC,GAAcM,KAAM,SAW9BzH,UAAU,cAAxC,UACE,uBAAOuC,QAAQ,WAAWvC,UAAU,iBACpC,uBACEwC,KAAK,OACLxC,UAAU,2BACV,aAAW,SACX,mBAAiB,eACjBY,GAAG,WACHgE,YAAY,uBACZnC,KAAK,WACLC,MAAOgC,EACP/B,SAxCc,SAACZ,GACzBA,EAAEC,iBACF2C,EAAY5C,EAAEa,OAAOF,UAwCb,wBAAQ1C,UAAU,uBAAuBwC,KAAK,SAA9C,oDAIN,sBAAKmH,IAAKpC,EAAcvH,UAAU,gBAAlC,UACE,sBAAKA,UAAU,UAAf,wBACa,qBAAKY,GAAG,MAAR,SAAe8G,EAAY,KADxC,eAC8D,IAC5D,qBAAK9G,GAAG,MAAR,SAAe8G,EAAY,KAF7B,YAEgDD,KAEhD,qBAAKzH,UAAU,gBAAf,SACA,wBAAQe,QAjFY,WAIxByC,EAAIwF,QAAQY,GAAG,SAAS,WACpBzH,QAAQC,IAAI,OACdyF,QA2EE,kCA9BI,6BCtIG,SAASgC,EAAkB3J,GAGtC,MAA0Be,mBAAS,IAAnC,mBAAOgC,EAAP,KAAcsB,EAAd,KACA,EAAkCtD,mBAAS,IAA3C,mBAAO6I,EAAP,KAAkBC,EAAlB,KACA,EAAkC9I,mBAAS,IAA3C,mBAAOuD,EAAP,KAAkBC,EAAlB,KACA,EAAgCxD,mBAAS,IAAzC,mBAAOyD,EAAP,KAAiBC,EAAjB,KACMN,EAAcnE,EAAM2F,MAAMC,OAAOlF,GAEvC0C,qBAAU,WACNlD,IAAMmD,IAAN,0BAA6Bc,IACjC/D,MAAK,SAAAC,GACOgE,EAAShE,EAASC,KAAKyC,OACvB8G,EAAaxJ,EAASC,KAAKyC,OAC3BwB,EAAalE,EAASC,KAAKgE,WAC3BG,EAAYpE,EAASC,KAAKkE,aAEtCjE,OAAM,SAAAC,GAAG,OAAIyB,QAAQC,IAAI1B,QACtB,IAuBH,OACI,gCACI,iDAAoBoJ,KACpB,uBAAMhI,SAbO,SAAAC,GACvBA,EAAEC,iBACF,IAAMgI,EAAc,CAAE/G,QAAOuB,YAAWE,YACxCtE,IAAM6J,IAAN,0BAA6B5F,GAAe2F,GAC1C1J,MAAK,SAAAC,GACLL,EAAMmC,QAAQC,KAAd,iBAA6B+B,OAE7B5D,OAAM,SAAAC,GAAG,OAAIyB,QAAQC,IAAI1B,OAMjB,UACA,uBAAO6B,QAAQ,QAAf,iCACR,uBACCC,KAAK,OACLC,KAAK,QACLC,MAAOO,EACPN,SAAU,SAAAZ,GAAC,OAAIwC,EAASxC,EAAEa,OAAOF,UAEtB,6GACJ,uBAAOH,QAAQ,WAAf,uBACR,uBACCC,KAAK,OACLC,KAAK,WACLC,MAAOgC,EACP/B,SAAU,SAAAZ,GAAC,OAAI4C,EAAY5C,EAAEa,OAAOF,UAE7B,wBAAOH,QAAQ,OAAf,UACI,uBAAOC,KAAK,OAAOG,SAzCN,SAACZ,GACtB,IAAM8C,EAAa,IAAIC,SACvBD,EAAWE,OAAO,YAAahD,EAAEa,OAAOoC,MAAM,IAC9CtB,EACGK,aAAac,GACbvE,MAAK,SAACC,GACLkE,EAAalE,EAAS0E,eAEvBxE,OAAM,SAACC,GAAD,OAASyB,QAAQC,IAAI,mCAAoC1B,SAkCzD8D,GAAa,uBAAO7C,IAAK6C,EAAWU,UAAQ,OAE7C,wBAAQ1C,KAAK,SAAb,wCCtBD0H,MA9Bf,SAAahK,GAEX,MAAwBe,mBAASf,EAAMW,MAAvC,mBAAOA,EAAP,KAAaF,EAAb,KAGMwJ,EAAU,SAAAtJ,GACdF,EAAQE,IAGV,OACE,sBAAKb,UAAU,MAAf,UACE,cAACC,EAAD,CAAQY,KAAMA,EAAMF,QAASwJ,IAC7B,eAAC,IAAD,WACI,cAAC,IAAD,CAAO1E,OAAK,EAACH,KAAK,IAAID,UAAWtF,IACjC,cAAC,IAAD,CAAO0F,OAAK,EAACH,KAAK,UAAUI,OAAQ,SAAAxF,GAAK,OAAI,cAACc,EAAD,aAAQL,QAASwJ,GAAajK,OAC3E,cAAC,IAAD,CAAOuF,OAAK,EAACH,KAAK,SAASI,OAAQ,SAAAxF,GAAK,OAAI,cAAC4C,EAAD,aAAOnC,QAASwJ,GAAajK,OACzE,cAAC,EAAD,CAAgBuF,OAAK,EAACH,KAAK,SAASzE,KAAMA,EAAMwE,UAAWlC,IAC3D,cAAC,IAAD,CAAOsC,OAAK,EAACH,KAAK,YAAYI,OAAQ,SAAAxF,GAAK,OAAI,cAAC8F,EAAD,yBAAoBrF,QAASwJ,GAAajK,GAA1C,IAAiDW,KAAMA,QACtG,cAAC,IAAD,CAAO4E,OAAK,EAACH,KAAK,aAAaD,UAAWf,IAC1C,cAAC,IAAD,CAAOmB,OAAK,EAACH,KAAK,aAAaD,UAAWM,IAC1C,cAAC,IAAD,CAAOF,OAAK,EAACH,KAAK,kBAAkBD,UAAWwE,IAC/C,cAAC,IAAD,CAAOpE,OAAK,EAACH,KAAK,OAAOD,UAAW4B,OAExC,wBAAQjH,UAAU,sCAAlB,SACE,wGC5BOoK,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBhK,MAAK,YAAkD,IAA/CiK,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,MCIdjK,IAAMmD,IAAI,sBACTjD,MAAK,SAAAC,GACJ4B,QAAQC,IAAI,iBAAkB7B,EAASC,MACvC,IAAMK,EAAQN,EAASC,KACvBoK,IAASlF,OACP,cAAC,IAAD,UACE,cAAC,EAAD,CAAK7E,KAAMA,MAEbgK,SAASC,eAAe,YAM5BV,M","file":"static/js/main.60d5422a.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport default function HomePage() {\r\n  return (\r\n    <div className=\"home-container\">\r\n      <h1>Welcome to NabeTone</h1>\r\n      <p>\r\n        A project where people can record or listen to stories, memories,\r\n        sights and sounds about specific geographic locations. Listen to a story\r\n        while experiencing being right where the story takes place. \r\n        <br></br>\r\n        Stories are as personal as the relationship people have with the spaces they\r\n        inhabit. Secret histories are unearthed, private truths unveiled, and\r\n        tales as diverse as the city itself are discovered and shared. Whose\r\n        voices are not part of the official story of your neighbourhood?\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { logout } from \"../services/auth\";\r\n\r\nexport default function Navbar(props) {\r\n  const handleLogout = () => {\r\n    logout().then(() => {\r\n      props.setUser(null);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <nav className=\"navbar sticky-top navbar-expand-lg navbar-dark bg-dark\">\r\n      <div className=\"container-fluid\">\r\n      <div className=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n        <ul className=\"navbar-nav\">\r\n          {props.user ? (\r\n            <>\r\n              <Link to=\"/my-tones\" className=\"nav-link\">\r\n                <li className=\"nav-item\">My Tones</li>\r\n              </Link>\r\n              {/* <Link to=\"/tones\">\r\n                <li>All Tones</li>\r\n              </Link> */}\r\n              <Link to=\"/tones/add\" className=\"nav-link\">\r\n                <li className=\"nav-item\">Add Tone</li>\r\n              </Link>\r\n              <Link to=\"/\" onClick={() => handleLogout()} className=\"nav-link\">\r\n                <li className=\"nav-item\">Logout</li>\r\n              </Link>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Link to=\"/\" className=\"nav-link active\">\r\n                <li className=\"nav-item\">Home</li>\r\n              </Link>\r\n              <Link to=\"/signup\" className=\"nav-link\">\r\n                <li className=\"nav-item\">Signup</li>\r\n              </Link>\r\n              <Link to=\"/login\" className=\"nav-link\">\r\n                <li className=\"nav-item\">Login</li>\r\n              </Link>\r\n            </>\r\n          )}\r\n          <Link to=\"/map\" className=\"nav-link\">\r\n            <li className=\"nav-item\">Locate NodeTones</li>\r\n          </Link>\r\n        </ul>\r\n        </div>\r\n        </div>\r\n      </nav>\r\n    </>\r\n  );\r\n}\r\n","import axios from 'axios';\r\n\r\nconst signup = (username, password) => {\r\n    return axios.post('/api/auth/signup', {username, password})\r\n    .then(response => {\r\n        return response.data;\r\n    })\r\n    .catch(err => {\r\n        return err.response.data;\r\n    })\r\n}\r\n\r\nconst login = (username, password) => {\r\n    return axios.post('/api/auth/login', {username, password})\r\n    .then(response => {\r\n        return response.data;\r\n    })\r\n    .catch(err => {\r\n        return err.response.data;\r\n    })\r\n}\r\n\r\nconst logout = () => {\r\n    return axios.delete('/api/auth/logout')\r\n    .then(response => {\r\n        return response.data;\r\n    })\r\n    .catch(err => {\r\n        return err.response.data;\r\n    })\r\n}\r\n\r\nexport { signup, login, logout };","import React from \"react\";\r\nimport { signup } from \"../services/auth\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function Signup(props) {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    signup(username, password)\r\n      .then((response) => {\r\n        console.log(response);\r\n        if (response.message) {\r\n          // reset the form\r\n          setUsername(\"\");\r\n          setPassword(\"\");\r\n          // set the message\r\n          setMessage(response.message);\r\n        } else {\r\n          // user is correctly signed up in the backend\r\n          // add the user to the state of App.js\r\n          props.setUser(response);\r\n          props.history.push(\"/map\");\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <section className=\"vh-100\" style={{ backgroundColor: \"#2a2d30\" }}>\r\n        <div className=\"container py-5 h-100\">\r\n          <div className=\"row d-flex justify-content-center align-items-center h-100\">\r\n            <div className=\"col col-xl-10 \">\r\n              <div className=\"card\" style={{ borderRadius: \"1rem\" }}>\r\n                <div className=\"row g-0\">\r\n                  <div className=\"col-md-6 col-lg-5 d-none d-md-block\">\r\n                    <img\r\n                      src=\"https://images.unsplash.com/photo-1593769632597-e1c3dc2a9a93?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=2538&q=80\"\r\n                      alt=\"login form\"\r\n                      className=\"img-fluid\"\r\n                      style={{ borderRadius: \"1rem 0 0 1rem\" }}\r\n                    />\r\n                  </div>\r\n                  <div className=\"col-md-6 col-lg-7 d-flex align-items-center\">\r\n                    <div className=\"card-body p-4 p-lg-5 text-black\">\r\n                      <h3 className=\"fw-normal mb-3 pb-3\" style={{ letterSpacing: \"1px\" }}>Signup</h3>\r\n                      <form onSubmit={handleSubmit}>\r\n                      <div className=\"form-outline mb-4\">\r\n                        <label htmlFor=\"username\" className=\"form-label\">Username: </label>\r\n                        <input\r\n                          type=\"text\"\r\n                          name=\"username\"\r\n                          className=\"form-control form-control-lg\"\r\n                          value={username}\r\n                          onChange={(e) => setUsername(e.target.value)}\r\n                        />\r\n                        </div>\r\n                        <div className=\"form-outline mb-4\">\r\n                        <label htmlFor=\"password\" className=\"form-label\">Password: </label>\r\n                        <input\r\n                          type=\"password\"\r\n                          name=\"password\"\r\n                          className=\"form-control form-control-lg\"\r\n                          value={password}\r\n                          onChange={(e) => setPassword(e.target.value)}\r\n                        />\r\n                        </div>\r\n                        <button type=\"submit\" className=\"btn btn-dark btn-lg btn-block\">Sign up</button>\r\n                        <br></br>\r\n                        {message && <p\r\n                            className=\"mb-5 pb-lg-2\"\r\n                            style={{ color: \"#393f81\" }}\r\n                          >{message}</p>}\r\n                      </form>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </>\r\n  );\r\n}\r\n","/* eslint-disable react/style-prop-object */\r\nimport React from \"react\";\r\nimport { login } from \"../services/auth\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function Login(props) {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    // console.log(username, password)\r\n\r\n    login(username, password)\r\n      .then((response) => {\r\n        console.log(response);\r\n        if (response.message) {\r\n          // reset the form\r\n          setUsername(\"\");\r\n          setPassword(\"\");\r\n          // set the message\r\n          setMessage(response.message);\r\n        } else {\r\n          // user is correctly signed up in the backend\r\n          // add the user to the state of App.js\r\n          props.setUser(response);\r\n          props.history.push(\"/map\");\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <section className=\"vh-100\" style={{ backgroundColor: \"#2a2d30\" }}>\r\n        <div className=\"container py-5 h-100\">\r\n          <div className=\"row d-flex justify-content-center align-items-center h-100\">\r\n            <div className=\"col col-xl-10 \">\r\n              <div className=\"card\" style={{ borderRadius: \"1rem\" }}>\r\n                <div className=\"row g-0\">\r\n                  <div className=\"col-md-6 col-lg-5 d-none d-md-block\">\r\n                    <img\r\n                      src=\"https://images.unsplash.com/photo-1528728935509-22fb14722a30?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=718&q=80\"\r\n                      alt=\"login form\"\r\n                      className=\"img-fluid\"\r\n                      style={{ borderRadius: \"1rem 0 0 1rem\" }}\r\n                    />\r\n                  </div>\r\n                  <div className=\"col-md-6 col-lg-7 d-flex align-items-center\">\r\n                    <div className=\"card-body p-4 p-lg-5 text-black\">\r\n                      <h3\r\n                        className=\"fw-normal mb-3 pb-3\"\r\n                        style={{ letterSpacing: \"1px\" }}\r\n                      >\r\n                        Login\r\n                      </h3>\r\n                      <form onSubmit={handleSubmit}>\r\n                        <div className=\"form-outline mb-4\">\r\n                          <label htmlFor=\"username\" className=\"form-label\">\r\n                            Username:{\" \"}\r\n                          </label>\r\n                          <input\r\n                            type=\"text\"\r\n                            name=\"username\"\r\n                            className=\"form-control form-control-lg\"\r\n                            value={username}\r\n                            onChange={(e) => setUsername(e.target.value)}\r\n                          />\r\n                        </div>\r\n                        <div className=\"form-outline mb-4\">\r\n                          <label htmlFor=\"password\" className=\"form-label\">\r\n                            Password:{\" \"}\r\n                          </label>\r\n                          <input\r\n                            type=\"password\"\r\n                            name=\"password\"\r\n                            className=\"form-control form-control-lg\"\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                          />\r\n                        </div>\r\n                        <div className=\"pt-1 mb-4\">\r\n                          <button\r\n                            type=\"submit\"\r\n                            className=\"btn btn-dark btn-lg btn-block\"\r\n                          >\r\n                            Log In\r\n                          </button>\r\n                        </div>\r\n                        {message && (\r\n                          <p\r\n                            className=\"mb-5 pb-lg-2\"\r\n                            style={{ color: \"#393f81\" }}\r\n                          >\r\n                            {message}\r\n                          </p>\r\n                        )}\r\n                      </form>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </>\r\n  );\r\n}\r\n","import { Link } from 'react-router-dom';\r\n\r\nexport default function AudioFileCard({ title, _id }) {\r\n\treturn (\r\n\t\t<>\r\n        <ul className=\"list-group list-group-flush\">\r\n\r\n\t\t\t<Link to={`/tones/${_id}`} className=\"list-nodes\">\r\n\t\t\t\t<h3>{title}</h3>\r\n\t\t\t</Link>\r\n        </ul>\r\n\t\t</>\r\n\t)\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport React from 'react';\r\nimport axios from 'axios';\r\nimport AudioFileCard from '../components/AudioFileCard';\r\n\r\n\r\nexport default function AudioFilesPage() {\r\n    // we don't need this bc we are using the proxy in package.json\r\n\t// const API_URL = 'http://localhost:5005';\r\n\r\n\tconst [audioFiles, setAudioFiles] = useState([]);\r\n\r\n\tconst getAllAudioFiles = () => {\r\n\t\t// get request to the server\r\n\t\taxios.get('/api/audiofiles')\r\n\t\t\t.then(response => {\r\n\t\t\t\tconsole.log(response.data)\r\n\t\t\t\tsetAudioFiles(response.data);\r\n\t\t\t})\r\n\t\t\t.catch(err => console.log(err));\r\n\t}\r\n\r\n\tuseEffect(() => { \r\n\t\tgetAllAudioFiles();\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h1>All NabeTones</h1>\r\n\t\t\t{audioFiles.map(audioFile => <AudioFileCard key={audioFile._id} {...audioFile} />)}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import axios from \"axios\";\r\n\r\nconst service = axios.create({\r\n  // baseURL: \"http://localhost:5005/api\",\r\n  baseURL: \"/api\",\r\n  // make sure you use PORT = 5005 (the port where our server is running)\r\n  withCredentials: true // => you might need this when having the users in the app\r\n});\r\n\r\nconst errorHandler = (err) => {\r\n  throw err;\r\n};\r\n\r\nconst handleUpload = (file) => {\r\n  return service\r\n    .post(\"/audiofiles/upload\", file)\r\n    .then((res) => res.data)\r\n    .catch(errorHandler);\r\n};\r\n\r\nconst saveNewAudioFile = (newAudioFile) => {\r\n  return service\r\n    .post(\"/audiofiles/tones/add\", newAudioFile)\r\n    .then((res) => res.data)\r\n    .catch(errorHandler);\r\n};\r\n\r\nconst deleteAudioFile = (audioFileId) => {\r\n    return service.delete(`/audiofiles/${audioFileId}`)\r\n    .then((res) => res.data)\r\n    .catch(errorHandler);\r\n}\r\n\r\nconst data = {\r\n    service,\r\n    handleUpload,\r\n    saveNewAudioFile,\r\n    deleteAudioFile\r\n};\r\n\r\nexport default data;","import React from \"react\";\r\nimport service from \"../api/service\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function AddAudioFile(props) {\r\n  const [title, setTitle] = useState(\"\");\r\n  const [audioPath, setAudioPath] = useState(\"\");\r\n  const [location, setLocation] = useState(\"\");\r\n\r\n  const handleFileUpload = (e) => {\r\n    const uploadData = new FormData();\r\n    uploadData.append(\"audioPath\", e.target.files[0]);\r\n    service\r\n      .handleUpload(uploadData)\r\n      .then((response) => {\r\n        setAudioPath(response.secure_url);\r\n      })\r\n      .catch((err) => console.log(\"Error while uploading the file: \", err));\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    service\r\n      .saveNewAudioFile({ title, audioPath, location })\r\n      .then((res) => {\r\n        console.log(\"added new audio file: \", res);\r\n        props.history.push('/my-tones');\r\n      })\r\n      .catch((err) => console.log(\"Error while adding the new audio file: \", err));\r\n  };\r\n  \r\n  return (\r\n    <section className=\"vh-100\"  style={{ backgroundColor: \"#2a2d30\" }}>\r\n    <div className=\"container py-5 h-100\">\r\n    <div className=\"row d-flex justify-content-center align-items-center h-100\">\r\n    <div className=\"col-12 col-md-8 col-lg-6 col-xl-5\">\r\n    <div className=\"card bg-dark text-white\" style={{borderRadius: \"1rem\"}}>\r\n    <div className=\"card-body p-5 text-center\">\r\n    <div className=\"mb-md-5 mt-md-4 pb-5\">\r\n      <h2 className=\"fw-bold mb-2\">Add New NabeTone</h2>\r\n      <form onSubmit={handleSubmit}>\r\n      <div className=\"form-outline form-white mb-4\">\r\n        <label htmlFor=\"title\" className=\"form-label\">\r\n            Title\r\n            <input type=\"text\" id=\"title\" className=\"form-control form-control-lg\" placeholder=\"Sounds of Neukölln\" name=\"title\" value={title} onChange={e => setTitle(e.target.value)} />\r\n        </label>\r\n        </div>\r\n        <div className=\"form-outline form-white mb-4\">\r\n        <label htmlFor=\"location\" className=\"form-label\">\r\n            Location\r\n            <p className=\"small pb-lg-2\"><i>Tip: Add City & Postal Code/ZIP/PLZ to place Nabetone accurately on the map.</i></p>\r\n            <input type=\"text\" id=\"location\" className=\"form-control form-control-lg\" placeholder=\"Karl Marx Straße 177\" name=\"location\" value={location} onChange={e => setLocation(e.target.value)} />\r\n        </label>\r\n        </div>\r\n        <div className=\"form-outline form-white mb-4\">\r\n        <label htmlFor=\"file\" className=\"form-label\">\r\n        <input type='file' className=\"form-control\" onChange={handleFileUpload} />\r\n        {audioPath && <audio src={audioPath} controls />}\r\n        </label>\r\n        </div>\r\n        <button type=\"submit\"  className=\"btn btn-outline-light btn-lg px-5\">Add new NabeTone</button>\r\n      </form>\r\n      </div>\r\n      </div>\r\n      </div>\r\n      </div>\r\n      </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\n\r\nconst ProtectedRoute = ({\r\n\tcomponent: Component,\r\n\tuser,\r\n\tpath,\r\n\tredirectPath = '/',\r\n\t...rest\r\n}) => {\r\n\treturn (\r\n\t\t<Route\r\n\t\t\texact path={path}\r\n\t\t\trender={props => {\r\n\t\t\t\treturn user ? (\r\n\t\t\t\t\t<Component {...props} {...rest} user={user} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Redirect to={redirectPath} />\r\n\t\t\t\t)\r\n\t\t\t}}\r\n\t\t/>\r\n\t)\r\n}\r\nexport default ProtectedRoute;","import React from 'react';\r\nimport { useState, useEffect } from 'react'\r\nimport axios from 'axios';\r\nimport service from '../api/service';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function AudioDetailsPage(props) {\r\n    // const API_URL = 'http://localhost:5005';\r\n\r\n\tconst [audioFile, setAudioFile] = useState(null);\r\n    const [user, setUser] = useState(null);\r\n\tconst audioFileId = props.match.params.id;\r\n\r\n    const getAudioFile = () => {\r\n\t\taxios.get(`/api/audiofiles/${audioFileId}`)\r\n\t\t\t.then(response => {\r\n                console.log(response.data);\r\n\t\t\t\tsetAudioFile(response.data);\r\n\t\t\t})\r\n\t\t\t.catch(err => console.log(err))\r\n\t}\r\n\r\n    const getUserId = () => {\r\n        axios.get('/api/auth/loggedin')\r\n        .then(user => {\r\n            // console.log('user data is', user.data._id);\r\n            setUser(user.data);\r\n        })\r\n    }\r\n\r\n\tuseEffect(() => {\r\n\t\tgetAudioFile();\r\n        getUserId();\r\n\t}, [])\r\n\r\n    // const deleteAudioFile = () => {\r\n\t// \taxios.delete(`${API_URL}/api/audiofiles/${audioFileId}`)\r\n\t// \t\t.then(() => {\r\n\t// \t\t\t// redirect (for now) to Audio File List\r\n    //         \r\n\t// \t\t\tprops.history.push('/my-tones');\r\n\t// \t\t})\r\n\t// \t\t.catch(err => console.log(err));\r\n\t// }\r\n\r\n    const deleteAudioFile = (id) => {\r\n        return service\r\n        .deleteAudioFile(id)\r\n        .then(response => {\r\n            console.log('song deleted', response);\r\n            props.history.push('/my-tones');\r\n        })\r\n        .catch(err => console.log(err))\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {audioFile && (\r\n                <>\r\n                {user && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<h1>{audioFile.title}</h1>\r\n                    <div>\r\n                        <audio src={audioFile.audioPath} controls />\r\n                    </div>\r\n                    {/* If user's id matches the objects id, the object is deleted */}\r\n                    { user._id === audioFile.author ? (<button onClick={() => deleteAudioFile(audioFile._id)}>Delete {audioFile.title}</button>) : (<></>) }\r\n                    { user._id === audioFile.author ? (<Link to={`/tones/edit/${audioFile._id}`}><button>Edit {audioFile.title}</button></Link>) : <></> }\r\n\t\t\t\t</>\r\n            )}\r\n            </>\r\n\t\t\t)}\r\n        </div>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport axios from \"axios\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport AudioFileCard from \"../components/AudioFileCard\";\r\n\r\nexport default function UserAudioFilesPage(props) {\r\n  const [audioFiles, setAudioFiles] = useState([]);\r\n  const [searchAudioFile, setSearchAudioFile] = useState(\"\");\r\n  const [searchAudioFileLocation, setSearchAudioFileLocation] = useState(\"\");\r\n\r\n  const getUserAudio = () => {\r\n    axios\r\n      .get(`/api/audiofiles/useraudio/${props.user._id}`)\r\n      .then((user) => {\r\n        setAudioFiles(user.data);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  useEffect(() => {\r\n    getUserAudio();\r\n  }, []);\r\n\r\n  const handleAudioFileNameChange = (e) => {\r\n    e.preventDefault();\r\n    setSearchAudioFile(e.target.value);\r\n  };\r\n\r\n  const handleAudioFileLocationChange = (e) => {\r\n    e.preventDefault();\r\n    setSearchAudioFileLocation(e.target.value);\r\n  };\r\n\r\n  const filteredAudioFiles = audioFiles.filter(audioFile => {\r\n    return ( !searchAudioFile ? true: `${audioFile.title}`.toLowerCase().includes(searchAudioFile) )\r\n        && ( !searchAudioFileLocation ? true: `${audioFile.location}`.toLowerCase().includes(searchAudioFileLocation)  )\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <h1>Hi {props.user.username}, Here are your Tones</h1>\r\n      <div>\r\n      <div class=\"container\" style={{marginTop:\"8%\"}}>\r\n      <div class=\"col-md-6 col-md-offset-3\">\r\n          <form>\r\n          <div >   \r\n          <div className=\"input-group rounded\">\r\n            <label htmlFor=\"audioTitle\">Search by Name of NabeTone</label>\r\n            <input type=\"search\" name=\"audioTitle\" id=\"audioTitle\" placeholder=\"5 AM at Berghain\" value={searchAudioFile} onChange={handleAudioFileNameChange} />\r\n            </div>\r\n            </div>\r\n            <div className=\"input-group rounded\">\r\n                <label htmlFor=\"audioLocation\">Search by Location</label>\r\n                <p>( Search by location only works depending on your exact address input )</p>\r\n                <input type=\"search\" name=\"audioLocation\" id=\"audioLocation\" placeholder=\"Berlin\" value={searchAudioFileLocation} onChange={handleAudioFileLocationChange} />\r\n            </div>\r\n          </form>\r\n          </div>\r\n          </div>\r\n      </div>\r\n      \r\n      {filteredAudioFiles.length !== 0 ? (\r\n        filteredAudioFiles.map((audioFile) => (\r\n            <ul className=\"list-group\">\r\n            <li className=\"list-group-item\"><AudioFileCard key={audioFile._id} {...audioFile}></AudioFileCard></li>\r\n        </ul>\r\n      ))\r\n      ) : <h1>You have no Nabetones! <Link to=\"/tones/add\">Add a Nabetone?</Link></h1>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport mapboxgl from \"!mapbox-gl\"; // eslint-disable-line import/no-webpack-loader-syntax\r\nimport { useRef, useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nmapboxgl.accessToken =\r\n  \"pk.eyJ1IjoibXphY2hhcmlhaCIsImEiOiJja3RlNWt6dzIwNHJjMndxbjV3bnlpcmU2In0.7MRhuJXrG3GmAbv65IIEew\";\r\n\r\nconst mbxGeocoding = require(\"@mapbox/mapbox-sdk/services/geocoding\");\r\nconst geocoder = mbxGeocoding({ accessToken: mapboxgl.accessToken });\r\n\r\nexport default function MapboxPage(props) {\r\n  // mapbox\r\n  const mapContainer = useRef(null);\r\n  const map = useRef(null);\r\n  const [zoom, setZoom] = useState(11);\r\n\r\n  // input field of address\r\n  const [location, setLocation] = useState(\"\");\r\n  const [coordinates, setCoordinates] = useState([13.3983, 52.5124]);\r\n  let locationLng;\r\n  let locationLat;\r\n  let coord;\r\n  // audio file locations\r\n  const [audioFileLocations, setAudioFileLocations] = useState([]);\r\n  let audioId;\r\n  let audioTitle;\r\n  let audioPath;\r\n  // const API_URL = \"http://localhost:5005\";\r\n\r\n  // get all audio files + coordinates from user to populate the map\r\n  const getAllAudioFiles = () => {\r\n    // get request to the server\r\n    axios\r\n      .get(`/api/audiofiles`)\r\n      .then( (response) => {\r\n        // console.log(response.data)\r\n        setAudioFileLocations(response.data);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  // convert / forward geocode the input address to coordinates\r\n  const getAudioFileLocations = () => {\r\n    for (let i = 0; i < audioFileLocations.length; i++) {\r\n      geocoder\r\n        .forwardGeocode({\r\n          query: audioFileLocations[i].location,\r\n        })\r\n        .send()\r\n        // eslint-disable-next-line no-loop-func\r\n        .then((response) => {\r\n          // get coordinates from first object of array (most accurate to address)\r\n          const audioLocales = response.body.features[0];\r\n          // console.log(audioLocales);\r\n          // populate the coordinates\r\n          coord = [audioLocales.center[0], audioLocales.center[1]];\r\n          audioId = audioFileLocations[i]._id;\r\n          audioTitle = audioFileLocations[i].title;\r\n          audioPath = audioFileLocations[i].audioPath;\r\n          addMarker(coord, audioId, audioTitle, audioPath);\r\n        });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getAllAudioFiles();\r\n    // initialize map only once\r\n    if (map.current) return;\r\n    map.current = new mapboxgl.Map({\r\n      container: mapContainer.current,\r\n      style: \"mapbox://styles/mzachariah/ckue5feo1132o17qljqbw0dsn\",\r\n      center: [coordinates[0], coordinates[1]],\r\n      zoom: zoom,\r\n    });\r\n    // add geolocation\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    const geolocate = new mapboxgl.GeolocateControl({\r\n      positionOptions: {\r\n        enableHighAccuracy: true,\r\n      },\r\n      // When active the map will receive updates to the device's location as it changes.\r\n      trackUserLocation: true,\r\n    });\r\n    map.current.addControl(geolocate);    \r\n  }, []);\r\n\r\n  const handleOnGeoLocate = () => {\r\n    // Unfortunately audio files don't repopulate when clicking to find your location\r\n    // For now, an invisible button appears behind the geolocate button as I cannot place it on top of the geolocate button\r\n    // I can only populate getAudioFileLocations() on the mapbox click event. \r\n    map.current.on('click', () => {\r\n        console.log(\"hey\");\r\n      getAudioFileLocations();\r\n    });\r\n  }\r\n\r\n  function addMarker(coord, id, audioTitle, audioPath) {\r\n    const audioIdString = `/tones/${id}`;\r\n    new mapboxgl.Marker({\r\n      color: \"red\",\r\n    });\r\n    new mapboxgl.Popup({\r\n      closeButton: false,\r\n      closeOnClick: false,\r\n      closeOnMove: false,\r\n      maxWidth: \"auto\"\r\n    }) \r\n      .setHTML(\r\n        // Linking audio player instead\r\n        `<div><a href=${audioIdString}>${audioTitle}</a></div><div><audio src=${audioPath} controls /></div>`\r\n      )\r\n      .setLngLat(coord)\r\n      .addTo(map.current);\r\n  }\r\n\r\n  const handleSetLocation = (e) => {\r\n    e.preventDefault();\r\n    setLocation(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    getAudioFileLocations();\r\n    // convert address inputed by user\r\n    geocoder\r\n      .forwardGeocode({\r\n        query: location,\r\n      })\r\n      .send()\r\n      .then(function (response) {\r\n        // console.log(response.body.features[0].center)\r\n        locationLng = response.body.features[0].center[0];\r\n        locationLat = response.body.features[0].center[1];\r\n        map.current.flyTo({ center: [locationLng, locationLat], zoom: 15 });\r\n      });\r\n  };\r\n  if(!audioFileLocations) {\r\n      return<></>\r\n  }\r\n  return (\r\n    <>\r\n    <div className=\"bg-mapbox\">\r\n    <div className=\"test-search\">\r\n        <div>\r\n          <form onSubmit={handleSubmit} className=\"mapbox-form\">\r\n            <label htmlFor=\"location\" className=\"label-mapbox\"></label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control rounded p-2\"\r\n              aria-label=\"Search\"\r\n              aria-describedby=\"search-addon\"\r\n              id=\"location\"\r\n              placeholder=\"Type in Address Here\"\r\n              name=\"location\"\r\n              value={location}\r\n              onChange={handleSetLocation}\r\n            />\r\n            <button className=\"btn btn-outline-dark\" type=\"submit\">Discover Nabetones in Your Area</button>\r\n          </form>\r\n        </div>\r\n        </div>\r\n      <div ref={mapContainer} className=\"map-container\">\r\n        <div className=\"sidebar\">\r\n          Longitude: <div id=\"lng\">{coordinates[0]}</div> | Latitude:{\" \"}\r\n          <div id=\"lng\">{coordinates[1]}</div> | Zoom: {zoom}\r\n        </div>\r\n        <div className=\"secret-button\">\r\n        <button onClick={handleOnGeoLocate}>Test Click</button>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import axios from 'axios';\r\nimport { useState, useEffect } from 'react';\r\nimport service from \"../api/service\";\r\n\r\nexport default function EditAudioFilePage(props) {\r\n    // const API_URL = 'http://localhost:5005';\r\n\r\n    const [title, setTitle] = useState(\"\");\r\n    const [initTitle, setInitTitle] = useState(\"\");\r\n    const [audioPath, setAudioPath] = useState(\"\");\r\n    const [location, setLocation] = useState(\"\");\r\n    const audioFileId = props.match.params.id;\r\n\r\n    useEffect(() => {\r\n        axios.get(`/api/audiofiles/${audioFileId}`)\r\n\t\t\t.then(response => {\r\n                setTitle(response.data.title);\r\n                setInitTitle(response.data.title);\r\n                setAudioPath(response.data.audioPath);\r\n                setLocation(response.data.location);\r\n\t\t\t})\r\n\t\t\t.catch(err => console.log(err))\r\n    }, [])\r\n\r\n    const handleFileUpload = (e) => {\r\n        const uploadData = new FormData();\r\n        uploadData.append(\"audioPath\", e.target.files[0]);\r\n        service\r\n          .handleUpload(uploadData)\r\n          .then((response) => {\r\n            setAudioPath(response.secure_url);\r\n          })\r\n          .catch((err) => console.log(\"Error while uploading the file: \", err));\r\n    };\r\n\r\n    const handleSubmit = e => {\r\n\t\te.preventDefault();\r\n\t\tconst requestBody = { title, audioPath, location };\r\n\t\taxios.put(`/api/audiofiles/${audioFileId}`, requestBody)\r\n\t\t\t.then(response => {\r\n\t\t\t\tprops.history.push(`/tones/${audioFileId}`);\r\n\t\t\t})\r\n\t\t\t.catch(err => console.log(err))\r\n\t}\r\n\r\n    return (\r\n        <div>\r\n            <h3>Edit Nabetone: {initTitle}</h3>\r\n            <form onSubmit={handleSubmit}>\r\n            <label htmlFor=\"title\">Title of Nabetone: </label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\tvalue={title}\r\n\t\t\t\t\tonChange={e => setTitle(e.target.value)}\r\n\t\t\t\t/>\r\n                <p>Tip: Add City & Postal Code/ZIP/PLZ to place Nabetone accurately on the map.</p>\r\n            <label htmlFor=\"location\">Address: </label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tname=\"location\"\r\n\t\t\t\t\tvalue={location}\r\n\t\t\t\t\tonChange={e => setLocation(e.target.value)}\r\n\t\t\t\t/>\r\n            <label htmlFor=\"file\">\r\n                <input type='file' onChange={handleFileUpload} />\r\n                {audioPath && <audio src={audioPath} controls />}\r\n            </label>\r\n                <button type=\"submit\">Update this Nodetone</button>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n","import './App.css';\n\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport { useState } from 'react';\nimport HomePage from './pages/HomePage';\nimport Navbar from './components/Navbar';\nimport Signup from './pages/Signup';\nimport Login from './pages/Login';\nimport AudioFilesPage from './pages/AudioFilesPage';\nimport AddAudioFile from './components/AddAudioFile';\nimport ProtectedRoute from './components/ProtectedRoute';\nimport AudioDetailsPage from './pages/AudioDetailsPage';\nimport UserAudioFilesPage from './pages/UserAudioFilesPage';\nimport MapboxPage from './pages/MapboxPage';\nimport EditAudioFilePage from './pages/EditAudioFilePage';\n\nfunction App(props) {\n\n  const [user, setUser] = useState(props.user);\n  // console.log('App js:', user);\n\n  const addUser = user => {\n    setUser(user);\n  }\n\n  return (\n    <div className=\"App\">\n      <Navbar user={user} setUser={addUser}/>\n      <Switch>\n          <Route exact path=\"/\" component={HomePage} />\n          <Route exact path=\"/signup\" render={props => <Signup setUser={addUser} {...props} />} />\n          <Route exact path=\"/login\" render={props => <Login setUser={addUser} {...props} />} />\n          <ProtectedRoute exact path=\"/tones\" user={user} component={AudioFilesPage} />\n          <Route exact path=\"/my-tones\" render={props => <UserAudioFilesPage setUser={addUser} {...props} user={user} />} />\n          <Route exact path='/tones/add' component={AddAudioFile} />\n          <Route exact path=\"/tones/:id\" component={AudioDetailsPage} />\n          <Route exact path=\"/tones/edit/:id\" component={EditAudioFilePage} />\n          <Route exact path=\"/map\" component={MapboxPage} />\n      </Switch>\n      <footer className=\"bg-dark text-center py-3 text-white\">\n        <p>Designed and built by Marishka Zachariah for Ironhack Berlin 2021</p>\n      </footer>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport axios from 'axios';\nimport 'bootstrap';\n\n// get the logged in user from the backend and pass it App.js\naxios.get('/api/auth/loggedin')\n.then(response => {\n  console.log('logged in user', response.data);\n  const user =  response.data;\n  ReactDOM.render(\n    <Router>\n      <App user={user} />\n    </Router>,\n    document.getElementById('root')\n  );  \n})\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}