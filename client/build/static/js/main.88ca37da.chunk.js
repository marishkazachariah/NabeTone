(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(30),o=n.n(a),r=(n(38),n(39),n(8)),i=n(2),s=(n(40),n(3)),l=n(0);function u(){return Object(l.jsxs)("div",{className:"home-container",children:[Object(l.jsx)("h1",{children:"Welcome to NabeTone"}),Object(l.jsxs)("p",{children:["Temp: A project where people can record or listen to stories, memories, sights and sounds about specific geographic locations. Listen to a story while experiencing being right where the story takes place.",Object(l.jsx)("br",{}),"Stories are as personal as the relationship people have with the spaces they inhabit. Secret histories are unearthed, private truths unveiled, and tales as diverse as the city itself are discovered and shared. Whose voices are not part of the official story of your neighbourhood?"]})]})}var j=n(5),d=n(4),b=n.n(d);function h(e){var t=function(){b.a.delete("/api/auth/logout").then((function(e){return e.data})).catch((function(e){return e.response.data})).then((function(){e.setUser(null)}))};return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("nav",{children:Object(l.jsxs)("ul",{children:[e.user?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(j.b,{to:"/my-tones",children:Object(l.jsx)("li",{children:"My Tones"})}),Object(l.jsx)(j.b,{to:"/tones/add",children:Object(l.jsx)("li",{children:"Add Tone"})}),Object(l.jsx)(j.b,{to:"/",onClick:function(){return t()},children:Object(l.jsx)("li",{children:"Logout"})})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(j.b,{to:"/",children:Object(l.jsx)("li",{children:"Home"})}),Object(l.jsx)(j.b,{to:"/signup",children:Object(l.jsx)("li",{children:"Signup"})}),Object(l.jsx)(j.b,{to:"/login",children:Object(l.jsx)("li",{children:"Login"})})]}),Object(l.jsx)(j.b,{to:"/map",children:Object(l.jsx)("li",{children:"Locate NodeTones"})})]})})})}function O(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),a=n[0],o=n[1],r=Object(c.useState)(""),s=Object(i.a)(r,2),u=s[0],j=s[1],d=Object(c.useState)(""),h=Object(i.a)(d,2),O=h[0],f=h[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h3",{children:"Signup"}),Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(e,t){return b.a.post("/api/auth/signup",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))}(a,u).then((function(t){console.log(t),t.message?(o(""),j(""),f(t.message)):(e.setUser(t),e.history.push("/map"))})).catch((function(e){return console.log(e)}))},children:[Object(l.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(l.jsx)("input",{type:"text",name:"username",value:a,onChange:function(e){return o(e.target.value)}}),Object(l.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(l.jsx)("input",{type:"password",name:"password",value:u,onChange:function(e){return j(e.target.value)}}),Object(l.jsx)("button",{type:"submit",children:"Sign up"}),O&&Object(l.jsx)("h3",{children:O})]})]})}function f(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),a=n[0],o=n[1],r=Object(c.useState)(""),s=Object(i.a)(r,2),u=s[0],j=s[1],d=Object(c.useState)(""),h=Object(i.a)(d,2),O=h[0],f=h[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h3",{children:"Login"}),Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(e,t){return b.a.post("/api/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))}(a,u).then((function(t){console.log(t),t.message?(o(""),j(""),f(t.message)):(e.setUser(t),e.history.push("/map"))})).catch((function(e){return console.log(e)}))},children:[Object(l.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(l.jsx)("input",{type:"text",name:"username",value:a,onChange:function(e){return o(e.target.value)}}),Object(l.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(l.jsx)("input",{type:"password",name:"password",value:u,onChange:function(e){return j(e.target.value)}}),Object(l.jsx)("button",{type:"submit",children:"Log In"}),O&&Object(l.jsx)("h3",{children:O})]})]})}function p(e){var t=e.title,n=e._id;return Object(l.jsx)("div",{children:Object(l.jsx)(j.b,{to:"/tones/".concat(n),children:Object(l.jsx)("h3",{children:t})})})}function x(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){b.a.get("/api/audiofiles").then((function(e){console.log(e.data),a(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"All NabeTones"}),n.map((function(e){return Object(l.jsx)(p,Object(r.a)({},e),e._id)}))]})}var m=b.a.create({baseURL:"http://localhost:5005/api",withCredentials:!0}),g=function(e){throw e},v={service:m,handleUpload:function(e){return m.post("/audiofiles/upload",e).then((function(e){return e.data})).catch(g)},saveNewAudioFile:function(e){return m.post("/audiofiles/tones/add",e).then((function(e){return e.data})).catch(g)},deleteAudioFile:function(e){return m.delete("/audiofiles/".concat(e)).then((function(e){return e.data})).catch(g)}};function y(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),a=n[0],o=n[1],r=Object(c.useState)(""),s=Object(i.a)(r,2),u=s[0],j=s[1],d=Object(c.useState)(""),b=Object(i.a)(d,2),h=b[0],O=b[1];return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"New NabeTone"}),Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),v.saveNewAudioFile({title:a,audioPath:u,location:h}).then((function(t){console.log("added new audio file: ",t),e.history.push("/my-tones")})).catch((function(e){return console.log("Error while adding the new audio file: ",e)}))},children:[Object(l.jsxs)("label",{htmlFor:"title",children:["Title",Object(l.jsx)("input",{type:"text",id:"title",placeholder:"Sounds of Neuk\xf6lln",name:"title",value:a,onChange:function(e){return o(e.target.value)}})]}),Object(l.jsx)("p",{children:"Tip: Add City & Postal Code/ZIP/PLZ to place Nabetone accurately on the map."}),Object(l.jsxs)("label",{htmlFor:"location",children:["Location",Object(l.jsx)("input",{type:"text",id:"location",placeholder:"Karl Marx Stra\xdfe 177",name:"location",value:h,onChange:function(e){return O(e.target.value)}})]}),Object(l.jsxs)("label",{htmlFor:"file",children:[Object(l.jsx)("input",{type:"file",onChange:function(e){var t=new FormData;t.append("audioPath",e.target.files[0]),v.handleUpload(t).then((function(e){j(e.secure_url)})).catch((function(e){return console.log("Error while uploading the file: ",e)}))}}),u&&Object(l.jsx)("audio",{src:u,controls:!0})]}),Object(l.jsx)("button",{type:"submit",children:"Add new NabeTone"})]})]})}var w=n(33),S=["component","user","path","redirectPath"],F=function(e){var t=e.component,n=e.user,c=e.path,a=e.redirectPath,o=void 0===a?"/":a,i=Object(w.a)(e,S);return Object(l.jsx)(s.b,{exact:!0,path:c,render:function(e){return n?Object(l.jsx)(t,Object(r.a)(Object(r.a)(Object(r.a)({},e),i),{},{user:n})):Object(l.jsx)(s.a,{to:o})}})};function C(e){var t=Object(c.useState)(null),n=Object(i.a)(t,2),a=n[0],o=n[1],r=Object(c.useState)(null),s=Object(i.a)(r,2),u=s[0],d=s[1],h=e.match.params.id;Object(c.useEffect)((function(){b.a.get("/api/audiofiles/".concat(h)).then((function(e){console.log(e.data),o(e.data)})).catch((function(e){return console.log(e)})),b.a.get("/api/auth/loggedin").then((function(e){d(e.data)}))}),[]);return Object(l.jsx)("div",{children:a&&Object(l.jsx)(l.Fragment,{children:u&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{children:a.title}),Object(l.jsx)("div",{children:Object(l.jsx)("audio",{src:a.audioPath,controls:!0})}),u._id===a.author?Object(l.jsxs)("button",{onClick:function(){return t=a._id,v.deleteAudioFile(t).then((function(t){console.log("song deleted",t),e.history.push("/my-tones")})).catch((function(e){return console.log(e)}));var t},children:["Delete ",a.title]}):Object(l.jsx)(l.Fragment,{}),u._id===a.author?Object(l.jsx)(j.b,{to:"/tones/edit/".concat(a._id),children:Object(l.jsxs)("button",{children:["Edit ",a.title]})}):Object(l.jsx)(l.Fragment,{})]})})})}function T(e){var t=Object(c.useState)([]),n=Object(i.a)(t,2),a=n[0],o=n[1],s=Object(c.useState)(""),u=Object(i.a)(s,2),j=u[0],d=u[1],h=Object(c.useState)(""),O=Object(i.a)(h,2),f=O[0],x=O[1];Object(c.useEffect)((function(){b.a.get("/api/audiofiles/useraudio/".concat(e.user._id)).then((function(e){o(e.data)})).catch((function(e){return console.log(e)}))}),[]);var m=a.filter((function(e){return(!j||"".concat(e.title).toLowerCase().includes(j))&&(!f||"".concat(e.location).toLowerCase().includes(f))}));return Object(l.jsxs)("div",{children:[Object(l.jsxs)("h1",{children:["Hi ",e.user.username,", Here are your Tones"]}),Object(l.jsx)("div",{children:Object(l.jsxs)("form",{children:[Object(l.jsx)("label",{htmlFor:"audioTitle",children:"Search by Name of NabeTone"}),Object(l.jsx)("input",{type:"search",name:"audioTitle",id:"audioTitle",placeholder:"5 AM at Berghain",value:j,onChange:function(e){e.preventDefault(),d(e.target.value)}}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"audioLocation",children:"Search by Location"}),Object(l.jsx)("p",{children:"( Search by location only works depending on your exact address input )"}),Object(l.jsx)("input",{type:"search",name:"audioLocation",id:"audioLocation",placeholder:"Berlin",value:f,onChange:function(e){e.preventDefault(),x(e.target.value)}})]})]})}),m.map((function(e){return Object(l.jsx)(p,Object(r.a)({},e),e._id)}))]})}var L=n(10),N=n.n(L);N.a.accessToken="pk.eyJ1IjoibXphY2hhcmlhaCIsImEiOiJja3RlNWt6dzIwNHJjMndxbjV3bnlpcmU2In0.7MRhuJXrG3GmAbv65IIEew";var k=n(68)({accessToken:N.a.accessToken});function P(e){var t,n,a,o,r,s,u=Object(c.useRef)(null),j=Object(c.useRef)(null),d=Object(c.useState)(11),h=Object(i.a)(d,2),O=h[0],f=(h[1],Object(c.useState)("")),p=Object(i.a)(f,2),x=p[0],m=p[1],g=Object(c.useState)([13.3983,52.5124]),v=Object(i.a)(g,2),y=v[0],w=(v[1],Object(c.useState)([])),S=Object(i.a)(w,2),F=S[0],C=S[1],T=function(){for(var e=function(e){k.forwardGeocode({query:F[e].location}).send().then((function(t){var n=t.body.features[0];a=[n.center[0],n.center[1]],o=F[e]._id,r=F[e].title,s=F[e].audioPath,function(e,t,n,c){var a="/tones/".concat(t);new N.a.Marker({color:"red"}),new N.a.Popup({closeButton:!1,closeOnClick:!1,closeOnMove:!1,maxWidth:"auto"}).setHTML("<div><a href=".concat(a,">").concat(n,"</a></div><div><audio src=").concat(c," controls /></div>")).setLngLat(e).addTo(j.current)}(a,o,r,s)}))},t=0;t<F.length;t++)e(t)};Object(c.useEffect)((function(){if(b.a.get("/api/audiofiles").then((function(e){C(e.data)})).catch((function(e){return console.log(e)})),!j.current){j.current=new N.a.Map({container:u.current,style:"mapbox://styles/mzachariah/ckue5feo1132o17qljqbw0dsn",center:[y[0],y[1]],zoom:O});var e=new N.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});j.current.addControl(e)}}),[]);return F?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),T(),k.forwardGeocode({query:x}).send().then((function(e){t=e.body.features[0].center[0],n=e.body.features[0].center[1],j.current.flyTo({center:[t,n],zoom:15})}))},children:[Object(l.jsx)("label",{htmlFor:"location",children:"Address"}),Object(l.jsx)("input",{type:"text",id:"location",name:"location",value:x,onChange:function(e){e.preventDefault(),m(e.target.value)}}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"Discover Nabetones in Your Area"})})]})}),Object(l.jsxs)("div",{ref:u,className:"map-container",children:[Object(l.jsxs)("div",{className:"sidebar",children:["Longitude: ",Object(l.jsx)("div",{id:"lng",children:y[0]})," | Latitude:"," ",Object(l.jsx)("div",{id:"lng",children:y[1]})," | Zoom: ",O]}),Object(l.jsx)("div",{className:"secret-button",children:Object(l.jsx)("button",{onClick:function(){j.current.on("click",(function(){console.log("hey"),T()}))},children:"Test Click"})})]})]}):Object(l.jsx)(l.Fragment,{})}function A(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),a=n[0],o=n[1],r=Object(c.useState)(""),s=Object(i.a)(r,2),u=s[0],j=s[1],d=Object(c.useState)(""),h=Object(i.a)(d,2),O=h[0],f=h[1],p=Object(c.useState)(""),x=Object(i.a)(p,2),m=x[0],g=x[1],y=e.match.params.id;Object(c.useEffect)((function(){b.a.get("/api/audiofiles/".concat(y)).then((function(e){o(e.data.title),j(e.data.title),f(e.data.audioPath),g(e.data.location)})).catch((function(e){return console.log(e)}))}),[]);return Object(l.jsxs)("div",{children:[Object(l.jsxs)("h3",{children:["Edit Nabetone: ",u]}),Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={title:a,audioPath:O,location:m};b.a.put("/api/audiofiles/".concat(y),n).then((function(t){e.history.push("/tones/".concat(y))})).catch((function(e){return console.log(e)}))},children:[Object(l.jsx)("label",{htmlFor:"title",children:"Title of Nabetone: "}),Object(l.jsx)("input",{type:"text",name:"title",value:a,onChange:function(e){return o(e.target.value)}}),Object(l.jsx)("p",{children:"Tip: Add City & Postal Code/ZIP/PLZ to place Nabetone accurately on the map."}),Object(l.jsx)("label",{htmlFor:"location",children:"Address: "}),Object(l.jsx)("input",{type:"text",name:"location",value:m,onChange:function(e){return g(e.target.value)}}),Object(l.jsxs)("label",{htmlFor:"file",children:[Object(l.jsx)("input",{type:"file",onChange:function(e){var t=new FormData;t.append("audioPath",e.target.files[0]),v.handleUpload(t).then((function(e){f(e.secure_url)})).catch((function(e){return console.log("Error while uploading the file: ",e)}))}}),O&&Object(l.jsx)("audio",{src:O,controls:!0})]}),Object(l.jsx)("button",{type:"submit",children:"Update this Nodetone"})]})]})}var U=function(e){var t=Object(c.useState)(e.user),n=Object(i.a)(t,2),a=n[0],o=n[1],j=function(e){o(e)};return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(h,{user:a,setUser:j}),Object(l.jsxs)(s.d,{children:[Object(l.jsx)(s.b,{exact:!0,path:"/",component:u}),Object(l.jsx)(s.b,{exact:!0,path:"/signup",render:function(e){return Object(l.jsx)(O,Object(r.a)({setUser:j},e))}}),Object(l.jsx)(s.b,{exact:!0,path:"/login",render:function(e){return Object(l.jsx)(f,Object(r.a)({setUser:j},e))}}),Object(l.jsx)(F,{exact:!0,path:"/tones",user:a,component:x}),Object(l.jsx)(s.b,{exact:!0,path:"/my-tones",render:function(e){return Object(l.jsx)(T,Object(r.a)(Object(r.a)({setUser:j},e),{},{user:a}))}}),Object(l.jsx)(s.b,{exact:!0,path:"/tones/add",component:y}),Object(l.jsx)(s.b,{exact:!0,path:"/tones/:id",component:C}),Object(l.jsx)(s.b,{exact:!0,path:"/tones/edit/:id",component:A}),Object(l.jsx)(s.b,{exact:!0,path:"/map",component:P})]}),Object(l.jsx)("footer",{children:Object(l.jsx)("p",{children:"Designed and built by Marishka Zachariah for Ironhack Berlin 2021"})})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,88)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),o(e),r(e)}))};b.a.get("/api/auth/loggedin").then((function(e){console.log("logged in user",e.data);var t=e.data;o.a.render(Object(l.jsx)(j.a,{children:Object(l.jsx)(U,{user:t})}),document.getElementById("root"))})),D()}},[[87,1,2]]]);
//# sourceMappingURL=main.88ca37da.chunk.js.map